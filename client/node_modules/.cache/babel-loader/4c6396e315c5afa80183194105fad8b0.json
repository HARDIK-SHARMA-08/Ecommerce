{"ast":null,"code":"import { useMemo as $1OhDq$useMemo, useRef as $1OhDq$useRef, useEffect as $1OhDq$useEffect } from \"react\";\nimport { useOverlayTriggerState as $1OhDq$useOverlayTriggerState } from \"@react-stately/overlays\";\n\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ /*\n    * Copyright 2020 Adobe. All rights reserved.\n    * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n    * you may not use this file except in compliance with the License. You may obtain a copy\n    * of the License at http://www.apache.org/licenses/LICENSE-2.0\n    *\n    * Unless required by applicable law or agreed to in writing, software distributed under\n    * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n    * OF ANY KIND, either express or implied. See the License for the specific language\n    * governing permissions and limitations under the License.\n    */\n\nvar $8796f90736e175cb$var$TOOLTIP_DELAY = 1500; // this seems to be a 1.5 second delay, check with design\nvar $8796f90736e175cb$var$TOOLTIP_COOLDOWN = 500;\nvar $8796f90736e175cb$var$tooltips = {};\nvar $8796f90736e175cb$var$tooltipId = 0;\nvar $8796f90736e175cb$var$globalWarmedUp = false;\nvar $8796f90736e175cb$var$globalWarmUpTimeout = null;\nvar $8796f90736e175cb$var$globalCooldownTimeout = null;\nfunction $8796f90736e175cb$export$4d40659c25ecb50b() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _props$delay = props.delay,\n    delay = _props$delay === void 0 ? $8796f90736e175cb$var$TOOLTIP_DELAY : _props$delay,\n    _props$closeDelay = props.closeDelay,\n    closeDelay = _props$closeDelay === void 0 ? $8796f90736e175cb$var$TOOLTIP_COOLDOWN : _props$closeDelay;\n  var _ref = (0, $1OhDq$useOverlayTriggerState)(props),\n    isOpen = _ref.isOpen,\n    open = _ref.open,\n    close = _ref.close;\n  var id = (0, $1OhDq$useMemo)(function () {\n    return \"\".concat(++$8796f90736e175cb$var$tooltipId);\n  }, []);\n  var closeTimeout = (0, $1OhDq$useRef)();\n  var ensureTooltipEntry = function ensureTooltipEntry() {\n    $8796f90736e175cb$var$tooltips[id] = hideTooltip;\n  };\n  var closeOpenTooltips = function closeOpenTooltips() {\n    for (var hideTooltipId in $8796f90736e175cb$var$tooltips) if (hideTooltipId !== id) {\n      $8796f90736e175cb$var$tooltips[hideTooltipId](true);\n      delete $8796f90736e175cb$var$tooltips[hideTooltipId];\n    }\n  };\n  var showTooltip = function showTooltip() {\n    clearTimeout(closeTimeout.current);\n    closeTimeout.current = null;\n    closeOpenTooltips();\n    ensureTooltipEntry();\n    $8796f90736e175cb$var$globalWarmedUp = true;\n    open();\n    if ($8796f90736e175cb$var$globalWarmUpTimeout) {\n      clearTimeout($8796f90736e175cb$var$globalWarmUpTimeout);\n      $8796f90736e175cb$var$globalWarmUpTimeout = null;\n    }\n    if ($8796f90736e175cb$var$globalCooldownTimeout) {\n      clearTimeout($8796f90736e175cb$var$globalCooldownTimeout);\n      $8796f90736e175cb$var$globalCooldownTimeout = null;\n    }\n  };\n  var hideTooltip = function hideTooltip(immediate) {\n    if (immediate || closeDelay <= 0) {\n      clearTimeout(closeTimeout.current);\n      closeTimeout.current = null;\n      close();\n    } else if (!closeTimeout.current) closeTimeout.current = setTimeout(function () {\n      closeTimeout.current = null;\n      close();\n    }, closeDelay);\n    if ($8796f90736e175cb$var$globalWarmUpTimeout) {\n      clearTimeout($8796f90736e175cb$var$globalWarmUpTimeout);\n      $8796f90736e175cb$var$globalWarmUpTimeout = null;\n    }\n    if ($8796f90736e175cb$var$globalWarmedUp) {\n      if ($8796f90736e175cb$var$globalCooldownTimeout) clearTimeout($8796f90736e175cb$var$globalCooldownTimeout);\n      $8796f90736e175cb$var$globalCooldownTimeout = setTimeout(function () {\n        delete $8796f90736e175cb$var$tooltips[id];\n        $8796f90736e175cb$var$globalCooldownTimeout = null;\n        $8796f90736e175cb$var$globalWarmedUp = false;\n      }, Math.max($8796f90736e175cb$var$TOOLTIP_COOLDOWN, closeDelay));\n    }\n  };\n  var warmupTooltip = function warmupTooltip() {\n    closeOpenTooltips();\n    ensureTooltipEntry();\n    if (!isOpen && !$8796f90736e175cb$var$globalWarmUpTimeout && !$8796f90736e175cb$var$globalWarmedUp) $8796f90736e175cb$var$globalWarmUpTimeout = setTimeout(function () {\n      $8796f90736e175cb$var$globalWarmUpTimeout = null;\n      $8796f90736e175cb$var$globalWarmedUp = true;\n      showTooltip();\n    }, delay);else if (!isOpen) showTooltip();\n  };\n  // eslint-disable-next-line arrow-body-style\n  (0, $1OhDq$useEffect)(function () {\n    return function () {\n      clearTimeout(closeTimeout.current);\n      var tooltip = $8796f90736e175cb$var$tooltips[id];\n      if (tooltip) delete $8796f90736e175cb$var$tooltips[id];\n    };\n  }, [id]);\n  return {\n    isOpen: isOpen,\n    open: function open(immediate) {\n      if (!immediate && delay > 0 && !closeTimeout.current) warmupTooltip();else showTooltip();\n    },\n    close: hideTooltip\n  };\n}\nexport { $8796f90736e175cb$export$4d40659c25ecb50b as useTooltipTriggerState };","map":null,"metadata":{},"sourceType":"module"}