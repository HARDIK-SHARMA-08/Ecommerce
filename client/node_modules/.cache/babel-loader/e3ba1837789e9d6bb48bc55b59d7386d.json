{"ast":null,"code":"import _slicedToArray from \"E:\\\\Web Development\\\\Ecommerce\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"E:\\\\Web Development\\\\Ecommerce\\\\client\\\\src\\\\context\\\\auth.js\";\nimport React, { useState, useEffect, useContext, createContext } from \"react\";\nimport axios from \"axios\";\nvar AuthContext = createContext();\nvar AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n  // Initialize auth state using localStorage or an empty string\n  var _useState = useState(function () {\n      var data = localStorage.getItem(\"auth\");\n      if (data) {\n        var parsedData = JSON.parse(data);\n        return {\n          user: parsedData.user,\n          token: parsedData.token\n        };\n      }\n      return {\n        user: null,\n        token: \"\" // Set to an empty string initially\n      };\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    auth = _useState2[0],\n    setAuth = _useState2[1]; // Use local state for Axios headers\n  var _useState3 = useState(auth ? auth.user.token : \"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    axiosAuthHeader = _useState4[0],\n    setAxiosAuthHeader = _useState4[1]; // Update Axios headers whenever auth.token changes\n  useEffect(function () {\n    setAxiosAuthHeader(auth.user.token);\n  }, [auth.user.token]);\n\n  // Set the header in Axios\n  axios.defaults.headers.common[\"Authorization\"] = axiosAuthHeader;\n  return /*#__PURE__*/React.createElement(AuthContext.Provider, {\n    value: [auth, setAuth],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 5\n    }\n  }, children);\n};\nvar useAuth = function useAuth() {\n  return useContext(AuthContext);\n};\nexport { useAuth, AuthProvider };","map":{"version":3,"names":["React","useState","useEffect","useContext","createContext","axios","AuthContext","AuthProvider","_ref","children","_useState","data","localStorage","getItem","parsedData","JSON","parse","user","token","_useState2","_slicedToArray","auth","setAuth","_useState3","_useState4","axiosAuthHeader","setAxiosAuthHeader","defaults","headers","common","createElement","Provider","value","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","useAuth"],"sources":["E:/Web Development/Ecommerce/client/src/context/auth.js"],"sourcesContent":["import React, { useState, useEffect, useContext, createContext } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nconst AuthProvider = ({ children }) => {\r\n  // Initialize auth state using localStorage or an empty string\r\n  const [auth, setAuth] = useState(() => {\r\n    const data = localStorage.getItem(\"auth\");\r\n    if (data) {\r\n      const parsedData = JSON.parse(data);\r\n      return {\r\n        user: parsedData.user,\r\n        token: parsedData.token,\r\n      };\r\n    }\r\n    return {\r\n      user: null,\r\n      token: \"\", // Set to an empty string initially\r\n    };\r\n  });\r\n\r\n  // Use local state for Axios headers\r\n  const [axiosAuthHeader, setAxiosAuthHeader] = useState(auth ? auth.user.token : \"\");\r\n\r\n  // Update Axios headers whenever auth.token changes\r\n  useEffect(() => {\r\n    setAxiosAuthHeader(auth.user.token);\r\n  }, [auth.user.token]);\r\n\r\n  // Set the header in Axios\r\n  axios.defaults.headers.common[\"Authorization\"] = axiosAuthHeader;\r\n\r\n  return (\r\n    <AuthContext.Provider value={[auth, setAuth]}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nconst useAuth = () => useContext(AuthContext);\r\n\r\nexport { useAuth, AuthProvider };\r\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,UAAU,EAAEC,aAAa,QAAQ,OAAO;AAC7E,OAAOC,KAAK,MAAM,OAAO;AAEzB,IAAMC,WAAW,GAAGF,aAAa,CAAC,CAAC;AAEnC,IAAMG,YAAY,GAAG,SAAfA,YAAYA,CAAAC,IAAA,EAAqB;EAAA,IAAfC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;EAC9B;EAAA,IAAAC,SAAA,GACwBT,QAAQ,CAAC,YAAM;MACrC,IAAMU,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;MACzC,IAAIF,IAAI,EAAE;QACR,IAAMG,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACL,IAAI,CAAC;QACnC,OAAO;UACLM,IAAI,EAAEH,UAAU,CAACG,IAAI;UACrBC,KAAK,EAAEJ,UAAU,CAACI;QACpB,CAAC;MACH;MACA,OAAO;QACLD,IAAI,EAAE,IAAI;QACVC,KAAK,EAAE,EAAE,CAAE;MACb,CAAC;IACH,CAAC,CAAC;IAAAC,UAAA,GAAAC,cAAA,CAAAV,SAAA;IAbKW,IAAI,GAAAF,UAAA;IAAEG,OAAO,GAAAH,UAAA,KAepB;EAAA,IAAAI,UAAA,GAC8CtB,QAAQ,CAACoB,IAAI,GAAGA,IAAI,CAACJ,IAAI,CAACC,KAAK,GAAG,EAAE,CAAC;IAAAM,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAA5EE,eAAe,GAAAD,UAAA;IAAEE,kBAAkB,GAAAF,UAAA,KAE1C;EACAtB,SAAS,CAAC,YAAM;IACdwB,kBAAkB,CAACL,IAAI,CAACJ,IAAI,CAACC,KAAK,CAAC;EACrC,CAAC,EAAE,CAACG,IAAI,CAACJ,IAAI,CAACC,KAAK,CAAC,CAAC;;EAErB;EACAb,KAAK,CAACsB,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAGJ,eAAe;EAEhE,oBACEzB,KAAA,CAAA8B,aAAA,CAACxB,WAAW,CAACyB,QAAQ;IAACC,KAAK,EAAE,CAACX,IAAI,EAAEC,OAAO,CAAE;IAAAW,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC1C9B,QACmB,CAAC;AAE3B,CAAC;AAED,IAAM+B,OAAO,GAAG,SAAVA,OAAOA,CAAA;EAAA,OAASrC,UAAU,CAACG,WAAW,CAAC;AAAA;AAE7C,SAASkC,OAAO,EAAEjC,YAAY"},"metadata":{},"sourceType":"module"}